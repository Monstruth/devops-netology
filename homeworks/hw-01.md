# Домашнее задание к занятию "Введение в Terraform"

### Цель задания

1. Установить и настроить Terrafrom.
2. Научиться использовать готовый код.

------

### Чеклист готовности к домашнему заданию

1. Скачайте и установите актуальную версию **terraform**(не менее 1.3.7). Приложите скриншот вывода команды ```terraform --version```

![01](https://user-images.githubusercontent.com/105611781/231152849-df7cf10e-8bae-4b69-9b53-ea0910230871.png)


2. Скачайте на свой ПК данный git репозиторий. Исходный код для выполнения задания расположен в директории **01/src**.
3. Убедитесь, что в вашей ОС установлен docker

```docker --version
Docker version 23.0.3, build 3e7cbfd
```

------

### Инструменты и дополнительные материалы, которые пригодятся для выполнения задания

1. Установка и настройка Terraform  [ссылка](https://cloud.yandex.ru/docs/tutorials/infrastructure-management/terraform-quickstart#from-yc-mirror)
2. Зеркало документации Terraform  [ссылка](https://registry.tfpla.net/browse/providers) 
3. Установка docker [ссылка](https://docs.docker.com/engine/install/ubuntu/) 
------

### Задание 1

1. Перейдите в каталог [**src**](https://github.com/netology-code/ter-homeworks/tree/main/01/src). Скачайте все необходимые зависимости, использованные в проекте. 
2. Изучите файл **.gitignore**. В каком terraform файле допустимо сохранить личную, секретную информацию?

```в файле personal.auto.tfvars```

3. Выполните код проекта. Найдите  в State-файле секретное содержимое созданного ресурса **random_password**. Пришлите его в качестве ответа.

```XO0mJ4dsh0pChEle```

4. Раскомментируйте блок кода, примерно расположенный на строчках 29-42 файла **main.tf**.
Выполните команду ```terraform validate```. Объясните в чем заключаются намеренно допущенные ошибки? Исправьте их.
```первая ошибка не указано имя ресурса с типом docker_image в текущем проекте
вторая ошибка в ресурсе с типом docker_container имя проекта начинается с цифры, что недопустимо
```

5. Выполните код. В качестве ответа приложите вывод команды ```docker ps```
```sudo docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                  NAMES
425d7b2e4761   6efc10a0510f   "/docker-entrypoint.…"   31 seconds ago   Up 30 seconds   0.0.0.0:8000->80/tcp   example_XO0mJ4dsh0pChEle
```
6. Замените имя docker-контейнера в блоке кода на ```hello_world```, выполните команду ```terraform apply -auto-approve```.
Объясните своими словами, в чем может быть опасность применения ключа  ```-auto-approve``` ? 
```terraform apply –auto-approve: создает или обновляет инфраструктуру; этап утверждения пользователем пропускается
то есть не надо вводить слово yes. при таком ключе нельзя будет просмотреть и проанализировать создаваемую инфраструктуру, команда apply выполняется без подтверждения, что при необдуманных и поспешных действиях чревато потерей файлов и данных.
```

7. Уничтожьте созданные ресурсы с помощью **terraform**. Убедитесь, что все ресурсы удалены. Приложите содержимое файла **terraform.tfstate**. 
```
{
  "version": 4,
  "terraform_version": "1.3.7",
  "serial": 10,
  "lineage": "a9e351f2-d9ba-4f35-cde2-f0236e9fadbb",
  "outputs": {},
  "resources": [],
  "check_results": null
}
```

8. Объясните, почему при этом не был удален docker образ **nginx:latest** ?(Ответ найдите в коде проекта или документации)
```в параметрах ресурса resource "docker_image" "nginx" мы указали параметр keep_locally = true - хранить локально
```
